
# 本配置文件支持热加载，修改prompt模板后无需重启服务。

#  支持的变量：
#   - context: 从检索结果拼接的知识文本
#   - question: 用户提出的问题
#   - tools: 可用的工具列表
#   - tool_names: 可用的工具名称列表
#   - history: 用户和Agent的对话历史
#   - input: 用户输入内容
#   - agent_scratchpad: Agent的思维记录

# ["basic_info_qa", "core_indicator_statistics", "structured_info_extraction", "fund_analysis_report"]
PROMPT_TEMPLATES = {
    "basic_info_qa": {
        "default":
        """
        假设你是一名资深、专业、经验丰富的基金经理，请根据下文所给内容，以专业、全面和准确的方式回答用户的问题。
        若问题涉及核心指标的统计分析，请行数据计算并做出精确的关联对比，以生成答案，但若无法进行相应的计算或对比，请回答“无法进行指定的计算或对比”。
        如果无法在所有现有信息中产生答案，请回答 ""这个问题我不知道答案" 或 "很遗憾，没有足够的相关信息来回答这个问题"，禁止试图编造答案。答案请使用中文。
        ----------------
        <已知信息> {context}  </已知信息>
        ----------------
        """
    },

    "structured_info_extraction": {
        "default":
        """
        假设你是一名资深、专业、经验丰富的基金经理，
        请根据下文所给的所有基金公告数据，以专业、全面和准确的态度，完整、正确、专业地按指定的json格式抽取结构化信息。
        如果无法抽取需要的信息，请说 "无法抽取需要的信息"。解答请使用json格式。答案请使用中文。
        ----------------
        <已知信息>{context} </已知信息>'
        ----------------
        """
    },

    "fund_analysis_report": {
        "default":
        """
        假设你是一名资深、专业、经验丰富的基金经理，
        请基于以下给出的基金公告数据，完整、正确、专业地生成针对基金分析需求的分析文本和统计图。
        你可以利用Python中的matplotlib库来绘制统计图。
        比如下面这个绘制统计图示例 ：
       <已知信息> ----------绘制统计图示例 ------------<已知信息>
            import matplotlib.pyplot as plt
            import seaborn as sns

            # 基于fund_data进行分析
            # 假设fund_data有两列，分别是'fund_name', 'return_rate'
            fund_names = fund_data['fund_name']
            return_rates = fund_data['return_rate']

            # 使用matplotlib创建柱状图，展示每只基金的回报率
            plt.bar(fund_names, return_rates)
            plt.title('基金回报率')
            plt.xlabel('基金名字')
            plt.ylabel('回报率')
            plt.xticks(rotation=90)  # 旋转x轴标签，以便于阅读
            plt.show()

            # 使用seaborn绘制箱线图以更好地理解回报率的分布
            sns.boxplot(x='return_rate', data=fund_data)
            plt.title('基金回报率分布')
            plt.show()
        <已知信息>-----------绘制统计图示例-----------<已知信息>
        这段代码会创建两张图，一张是每只基金的收益率柱状图，另一张是收益率的箱线图。
        这将帮助我们了解基金公告数据，并可能发现数据中的一些有趣的模式或趋势。

        记住，以上只是一个绘制统计图的示例，禁止直接利用他进行用户问题的回答。
        你需要的做的是首先分析问题，找出关键的、真实的数据和指标，然后调整代码以适应数据的实际结构和特征。
        请务必以统计图的形式为用户呈现。

        如果无法生成报告，请说 "无法生成分析报告"。报告请用中文和统计图形式呈现。
        ----------------
        <已知信息>{context} </已知信息>'
        ----------------
        """
    },
}



# PROMPT_TEMPLATES = {
#     "basic_info_qa": {
#         "default":
#             '<指令>根据基金公告数据，精准地回答以下问题。如果无法找到答案，请说“无法在公告数据中找到答案”。答案请使用中文。如果需要进行核心指标统计分析，请进行数据计算和关联对比，生成答案。如果无法计算或对比指标，请说“无法进行指定的计算或对比”。答案请使用中文。</指令>\n'
#             '<已知信息>{{ context }}</已知信息>\n'
#             # '<问题>{{ input  }}</问题>\n',
#     },

#     "core_indicator_statistics": {
#         "default":
#             '<指令>利用基金公告数据，进行核心指标统计分析，请进行数据计算和关联对比，生成答案。如果无法计算或对比指标，请说“无法进行指定的计算或对比”。答案请使用中文。 </指令>\n'
#             '<已知信息>{{ context }}</已知信息>\n'
#             # '<问题>{{ input  }}</问题>\n',
#     },

#     "structured_info_extraction": {
#         "default":
#             '<指令>利用基金公告数据，按指定的json格式抽取结构化信息。如果无法抽取需要的信息，请说 "无法抽取需要的信息"。解答请使用json格式。 </指令>\n'
#             '<已知信息>{{ context }}</已知信息>\n'
#             # '<问题>{{ input  }}</问题>\n',
#     },

#     "fund_analysis_report": {
#         "default":
#             '<指令>利用基金公告数据，生成针对基金分析需求的分析文本和统计图。如果无法生成报告，请说 "无法生成分析报告"。报告请用中文和统计图形式呈现。 </指令>\n'
#             '<已知信息>{{ context }}</已知信息>\n'
#             # '<问题>{{ input  }}</问题>\n'
#     },
# }
